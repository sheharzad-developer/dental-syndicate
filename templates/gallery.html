{% extends "base.html" %} {% block title %}Gallery - Behzad Dental Clinic{%
endblock %} {% block content %}
<!-- Gallery Hero Section -->
<!-- Gallery Grid Section -->
<section class="gallery-grid-section">
  <div class="gallery-container">
    <div class="section-header">
      <div class="section-badge">
        <span class="badge-icon">üé®</span>
        <span class="badge-text">Our Gallery</span>
      </div>
      <h2 class="section-title">Transformative Results</h2>
      <p class="section-subtitle">
        Witness the excellence of our dental treatments through these remarkable
        transformations
      </p>
    </div>

    <style>
      .slider {
        position: relative;
        width: 100%;
        margin: 0;
        border-radius: 0;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0)
        );
        backdrop-filter: blur(6px);
      }
      .slider-viewport {
        position: relative;
        width: 100%;
        
        overflow: hidden;
      }
      .slider-track {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 1200ms cubic-bezier(0.4, 0, 0.2, 1);
      }
      .slide {
        position: relative;
        min-width: 100%;
        height: 100%;
        opacity: 1;
        transition: opacity 600ms ease-in-out;
      }

      .slide.fade-out {
        opacity: 0.7;
      }
      .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transform: scale(1.02);
        transition: transform 1200ms cubic-bezier(0.4, 0, 0.2, 1);
      }
      .slide-caption {
        position: absolute;
        left: 20px;
        bottom: 18px;
        color: #fff;
        background: linear-gradient(
          90deg,
          rgba(0, 0, 0, 0.55),
          rgba(0, 0, 0, 0)
        );
        padding: 10px 14px;
        border-radius: 10px;
        backdrop-filter: blur(4px);
        font-weight: 600;
        letter-spacing: 0.2px;
      }
      .slider:hover .slide img {
        transform: scale(1.05);
        transition: transform 1200ms cubic-bezier(0.4, 0, 0.2, 1);
      }
      .slider-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 44px;
        height: 44px;
        border-radius: 50%;
        border: 0;
        background: rgba(255, 255, 255, 0.85);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 3;
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      .slider-arrow:hover {
        background: #fff;
        transform: translateY(-50%) scale(1.08);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
      }
      .slider-prev {
        left: 14px;
      }
      .slider-next {
        right: 14px;
      }
      .slider-dots {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 12px;
        display: flex;
        gap: 8px;
        justify-content: center;
        z-index: 3;
      }
      .slider-dots .dot {
        width: 9px;
        height: 9px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.55);
        border: 1px solid rgba(255, 255, 255, 0.7);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      .slider-dots .dot.active {
        background: #fff;
        transform: scale(1.25);
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      }

      /* Image Modal Styles */
      .image-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .image-modal.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        cursor: pointer;
        backdrop-filter: blur(5px);
      }

      .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        max-width: 95vw;
        max-height: 95vh;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .image-modal.active .modal-content {
        transform: translate(-50%, -50%) scale(1);
      }

      .modal-close {
        position: absolute;
        top: 15px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border: none;
        font-size: 28px;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        cursor: pointer;
        z-index: 10001;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        font-weight: bold;
      }

      .modal-close:hover {
        background: rgba(0, 0, 0, 1);
        transform: scale(1.1);
      }

      .modal-prev,
      .modal-next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        border: none;
        background: rgba(255, 255, 255, 0.9);
        color: #333;
        font-size: 20px;
        cursor: pointer;
        z-index: 10001;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .modal-prev:hover,
      .modal-next:hover {
        background: rgba(255, 255, 255, 1);
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .modal-prev {
        left: 20px;
      }

      .modal-next {
        right: 20px;
      }

      @media (max-width: 768px) {
        .modal-prev,
        .modal-next {
          width: 40px;
          height: 40px;
          font-size: 16px;
        }
        
        .modal-prev {
          left: 10px;
        }
        
        .modal-next {
          right: 10px;
        }
      }

      .modal-image {
        width: 100%;
        height: auto;
        max-height: 85vh;
        object-fit: contain;
        display: block;
      }

      .modal-caption {
        padding: 20px 25px;
        background: white;
        font-size: 18px;
        color: #333;
        text-align: center;
        border-top: 1px solid #eee;
        font-weight: 500;
      }
      @media (max-width: 768px) {
        .slider-viewport {
          height: 320px;
        }
        .slider-arrow {
          width: 38px;
          height: 38px;
        }
        .slide-caption {
          font-size: 0.9rem;
          left: 12px;
          right: 12px;
        }
      }
    </style>

    <!-- Transformations Slider -->
    <div class="gallery-category">
      <h3 class="category-title">
        <span class="category-icon">‚ú®</span> Patient Care Gallery
      </h3>
      <div class="slider" data-slider="transformations">
        <div class="slider-viewport">
          <div class="slider-track">
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient1.jpeg') }}"
                alt="Doctor-Patient Consultation"
              />
              <div class="slide-caption">Doctor-Patient Consultation</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient2.jpeg') }}"
                alt="Dental Examination"
              />
              <div class="slide-caption">Dental Examination</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient3.jpeg') }}"
                alt="Treatment Session"
              />
              <div class="slide-caption">Treatment Session</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient4.jpeg') }}"
                alt="Patient Consultation"
              />
              <div class="slide-caption">Patient Consultation</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient5.jpeg') }}"
                alt="Comprehensive Care"
              />
              <div class="slide-caption">Comprehensive Care</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient6.jpeg') }}"
                alt="Follow-up Care"
              />
              <div class="slide-caption">Follow-up Care</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient7.jpeg') }}"
                alt="Patient Care"
              />
              <div class="slide-caption">Personalized Care</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient8.jpeg') }}"
                alt="Patient Care"
              />
              <div class="slide-caption">Personalized Care</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/doctors-patient9.jpeg') }}"
                alt="Patient Care"
              />
              <div class="slide-caption">Personalized Care</div>
            </div>
          </div>
          <button class="slider-arrow slider-prev" aria-label="Previous">
            &#10094;
          </button>
          <button class="slider-arrow slider-next" aria-label="Next">
            &#10095;
          </button>
          <div class="slider-dots" aria-label="Slide indicators"></div>
        </div>
      </div>
    </div>

    <!-- Facilities Slider -->
    <div class="gallery-category">
      <h3 class="category-title">
        <span class="category-icon">üè•</span> Our Modern Facility
      </h3>
      <div class="slider" data-slider="facilities">
        <div class="slider-viewport">
          <div class="slider-track">
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/reception1.jpeg') }}"
                alt="Reception Area"
              />
              <div class="slide-caption">Reception Area</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/reception3.jpeg') }}"
                alt="Reception Lobby"
              />
              <div class="slide-caption">Reception Lobby</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/surgeryroom1.jpeg') }}"
                alt="Surgery Room"
              />
              <div class="slide-caption">Surgery Room</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/surgeryroom2.jpeg') }}"
                alt="Surgical Suite"
              />
              <div class="slide-caption">Surgical Suite</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/surgeryroom3.jpeg') }}"
                alt="Advanced Equipment"
              />
              <div class="slide-caption">Advanced Equipment</div>
            </div>
            <div class="slide">
              <img
                src="{{ url_for('static', filename='images/images/waitingroom1.jpeg') }}"
                alt="Waiting Lounge"
              />
              <div class="slide-caption">Waiting Lounge</div>
            </div>
          </div>
          <button class="slider-arrow slider-prev" aria-label="Previous">
            &#10094;
          </button>
          <button class="slider-arrow slider-next" aria-label="Next">
            &#10095;
          </button>
          <div class="slider-dots" aria-label="Slide indicators"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Call to Action Section -->
<section class="gallery-cta">
  <div class="gallery-cta-background">
    <div class="gallery-cta-particles"></div>
  </div>

  <div class="gallery-cta-container">
    <div class="gallery-cta-content">
      <h2>Ready for Your Transformation?</h2>
      <p>
        Join our gallery of success stories with a personalized treatment plan
      </p>
      <div class="gallery-cta-buttons">
        <a href="{{ url_for('appointment') }}" class="cta-btn primary">
          <span class="btn-text">Book Consultation</span>
          <span class="btn-icon">üìÖ</span>
          <div class="btn-glow"></div>
        </a>
        <a href="{{ url_for('contact') }}" class="cta-btn secondary">
          <span class="btn-text">Contact Us</span>
          <span class="btn-icon">üìû</span>
        </a>
      </div>
    </div>
  </div>
</section>
<script>
  (function () {
    function initSlider(root) {
      const track = root.querySelector(".slider-track");
      const slides = Array.from(root.querySelectorAll(".slide"));
      const prev = root.querySelector(".slider-prev");
      const next = root.querySelector(".slider-next");
      const dots = root.querySelector(".slider-dots");
      let index = 0;
      let timer = null;
      function setActiveDot() {
        if (!dots) return;
        Array.from(dots.children).forEach((d, i) => {
          d.classList.toggle("active", i === index);
        });
      }
      function goTo(i) {
        const total = slides.length;
        index = (i + total) % total;

        // Add smooth transition class
        track.style.transition =
          "transform 1500ms cubic-bezier(0.25, 0.1, 0.25, 1)";
        track.style.transform = "translateX(" + -index * 100 + "%)";

        // Remove transition class after animation completes
        setTimeout(() => {
          track.style.transition = "";
        }, 1500);

        setActiveDot();
      }
      function buildDots() {
        if (!dots) return;
        dots.innerHTML = "";
        slides.forEach((_, i) => {
          const b = document.createElement("button");
          b.className = "dot" + (i === 0 ? " active" : "");
          b.setAttribute("aria-label", "Go to slide " + (i + 1));
          b.addEventListener("click", () => {
            stop();
            goTo(i);
            start();
          });
          dots.appendChild(b);
        });
      }
      function start() {
        stop();
        timer = setInterval(() => goTo(index + 1), 8000);
      }
      function stop() {
        if (timer) {
          clearInterval(timer);
          timer = null;
        }
      }
      prev &&
        prev.addEventListener("click", () => {
          stop();
          goTo(index - 1);
          start();
        });
      next &&
        next.addEventListener("click", () => {
          stop();
          goTo(index + 1);
          start();
        });
      // Add click functionality to slides for viewing
      slides.forEach((slide, i) => {
        const img = slide.querySelector("img");
        if (img) {
          img.style.cursor = "pointer";
          img.addEventListener("click", function (e) {
            e.stopPropagation();
            openImageModal(this.src, this.alt, root);
          });
        }
      });

      root.addEventListener("mouseenter", stop);
      root.addEventListener("mouseleave", start);
      buildDots();
      goTo(0);
      start();
    }
    document.addEventListener("DOMContentLoaded", function () {
      document
        .querySelectorAll(".gallery-grid-section .gallery-grid")
        .forEach((g) => (g.style.display = "none"));
      document.querySelectorAll(".slider").forEach(initSlider);
    });

    // Modal functionality for image viewing
    function openImageModal(src, alt, currentSlider) {
      const modal = document.createElement("div");
      modal.className = "image-modal";
      
      // Get all images from the current slider
      const sliderImages = Array.from(currentSlider.querySelectorAll('.slide img'));
      const currentIndex = sliderImages.findIndex(img => img.src === src);
      
      modal.innerHTML = `
         <div class="modal-backdrop"></div>
         <div class="modal-content">
           <button class="modal-close">&times;</button>
           <button class="modal-prev" aria-label="Previous image">&#10094;</button>
           <button class="modal-next" aria-label="Next image">&#10095;</button>
           <img src="${src}" alt="${alt}" class="modal-image">
           <div class="modal-caption">${alt}</div>
         </div>
       `;

      // Add event listeners
      const backdrop = modal.querySelector(".modal-backdrop");
      const closeBtn = modal.querySelector(".modal-close");
      const prevBtn = modal.querySelector(".modal-prev");
      const nextBtn = modal.querySelector(".modal-next");
      const modalImage = modal.querySelector(".modal-image");
      const modalCaption = modal.querySelector(".modal-caption");

      let currentImageIndex = currentIndex;
      let autoSlideTimer = null;

      function showImage(index) {
        const image = sliderImages[index];
        modalImage.src = image.src;
        modalImage.alt = image.alt;
        modalCaption.textContent = image.alt;
        currentImageIndex = index;
      }

      function nextImage() {
        const nextIndex = (currentImageIndex + 1) % sliderImages.length;
        showImage(nextIndex);
        resetAutoSlide();
      }

      function prevImage() {
        const prevIndex = (currentImageIndex - 1 + sliderImages.length) % sliderImages.length;
        showImage(prevIndex);
        resetAutoSlide();
      }

      function startAutoSlide() {
        autoSlideTimer = setInterval(nextImage, 4000); // Auto-slide every 4 seconds
      }

      function resetAutoSlide() {
        if (autoSlideTimer) {
          clearInterval(autoSlideTimer);
        }
        startAutoSlide();
      }

      function stopAutoSlide() {
        if (autoSlideTimer) {
          clearInterval(autoSlideTimer);
          autoSlideTimer = null;
        }
      }

      backdrop.addEventListener("click", () => closeImageModal(modal));
      closeBtn.addEventListener("click", () => closeImageModal(modal));
      prevBtn.addEventListener("click", prevImage);
      nextBtn.addEventListener("click", nextImage);

      // Keyboard navigation
      document.addEventListener("keydown", handleKeyPress);

      function handleKeyPress(e) {
        if (e.key === "ArrowLeft") {
          prevImage();
        } else if (e.key === "ArrowRight") {
          nextImage();
        } else if (e.key === "Escape") {
          closeImageModal(modal);
        }
      }

      document.body.appendChild(modal);
      setTimeout(() => modal.classList.add("active"), 10);
      
      // Start auto-sliding
      startAutoSlide();

      // Pause auto-slide on hover
      modal.addEventListener("mouseenter", stopAutoSlide);
      modal.addEventListener("mouseleave", startAutoSlide);
    }

    function closeImageModal(modal) {
      modal.classList.remove("active");
      
      setTimeout(() => {
        if (modal.parentNode) {
          modal.parentNode.removeChild(modal);
        }
      }, 300);
    }

    // Close modal on escape key
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        const modal = document.querySelector(".image-modal.active");
        if (modal) {
          const closeBtn = modal.querySelector(".modal-close");
          if (closeBtn) closeBtn.click();
        }
      }
    });
  })();
</script>
{% endblock %}
